<template id='Timeline' data='{"posts": {"type": "post", "owner": "authed"}, "users": {"type": "user"}}'>
  <div class='user-control'>
    <div class='status'>Logged in as {{ currentUser.email }}</div>
    <div class='action'>
      <button action='user' method='delete' onSuccessUrl='index' class='button'>Log out</button>
    </div>
  <div>
    <h1>Timeline</h1>

    <ul>
      <li t-for="post in posts">
        {{ post.body }} by {{ post.user.first_name }} {{ post.user.surname }}
        <button action='post' method='delete' class='button'>Delete post</button>
      </li>
    </ul>

    <ul>
      <li t-for="user in users">
        {{ user.email }}
        <form action='friend' method='create'>
          <input type='hidden' name='friend_id' value='{{ user.id }}'>
          <button type='submit' class='button'>Add friend</button>
        </form>
      </li>
    </ul>

    <form action='post' method='create'>
      <h1><u>New post:</u></h1>
      <textarea name='body'></textarea>
      <button type='submit' class='button'>New post</button>
    </form>
  </div>
</template>
<script>
// High level TODOs
// - Friends of current user
// - Timeline includes posts of current user's friends
// - Create, update, delete examples, with and without parent relations

const Timeline = {
  template: 'Timeline', // default?
  mount: 'app'
}

window.onload = create(Timeline)
</script>
